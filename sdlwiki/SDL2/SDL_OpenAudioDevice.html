<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>SDL_OpenAudioDevice</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <style type="text/css">:root {
color-scheme: dark light; 
}
body {
background-color: white;
padding: 2vw;
color: #333;
max-width: 1200px;
margin: 0 auto;
font-size: 16px;
line-height: 1.5;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans",
Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
overflow-wrap: break-word;
}
a {
color: #0969da;

}
a:visited {
color: #064998;
}
h1 {
border-bottom: 2px solid #efefef;
}
h2 {
border-bottom: 1px solid #efefef;
}
p {
max-width: 85ch;
}
li {
max-width: 85ch;
}
div.sourceCode {
background-color: #f6f8fa;
max-width: 100%;
padding: 16px;
}
code {
background-color: #f6f8fa;
padding: 0px;
font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas,
"Liberation Mono", monospace;
}
table {
border: 1px solid #808080;
border-collapse: collapse;
}
td {
border: 1px solid #808080;
padding: 5px;
}
tr:nth-child(even) {
background-color: #f6f8fa;
}
.wikitopbanner {
display: flex;
justify-content: space-between;
align-items: center;
background-color: #efefef;
padding: 10px;
margin-bottom: 10px;
width: auto;
}
.wikibottombanner {
background-color: #efefef;
padding: 10px;
margin-top: 10px;
width: auto;
}
.alertBox {
background-color: #f8d7da;
border: 1px solid #f5c6cb;
max-width: 60%;
padding: 10;
margin: auto;
}
.anchorImage {
visibility: hidden;
padding-left: 0.2em;
color: #fff;
}
.anchorText:hover .anchorImage {
visibility: visible;
}
hr {
display: block;
height: 1px;
border: 0;
border-top: 1px solid #efefef;
margin: 1em 0;
padding: 0;
}

@media (prefers-color-scheme: dark) {
body {
color: #e6edf3;
background-color: #0d1117;
}
h1 {
border-color: rgba(48, 54, 61, 0.7);
}
h2 {
border-color: rgba(48, 54, 61, 0.7);
}
hr {
border-color: rgba(48, 54, 61, 0.7);
}
div.sourceCode {
background-color: #161b22;
}
code {
background-color: #161b22;
}
a {
color: #4493f8;
}
a:visited {
color: #2f66ad;
}
table {
border-color: rgba(48, 54, 61, 0.7);
}
td {
border-color: rgba(48, 54, 61, 0.7);
}
tr:nth-child(even) {
background-color: #161b22;
}
.wikitopbanner {
background-color: #263040;
}
.wikibottombanner {
background-color: #263040;
}
.anchorText:hover .anchorImage {
filter: invert(100%);
}
}
@media print {
body {
font-size: 12px;
}
table {
font-size: inherit;
}
a:visited {
color: #0969da;
}
.wikitopbanner,
.anchorText,
.wikibottombanner {
display: none;
}
}
</style>
  <style type="text/css"> code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
{ position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
{ content: attr(title);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; pointer-events: all; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
@media (prefers-color-scheme: dark) {
code span.al { color: #95da4c; font-weight: bold; } 
code span.an { color: #3f8058; } 
code span.at { color: #2980b9; } 
code span.bn { color: #f67400; } 
code span.bu { color: #7f8c8d; } 
code span.ch { color: #3daee9; } 
code span.co { color: #7a7c7d; } 
code span.cv { color: #7f8c8d; } 
code span.cn { color: #27aeae; font-weight: bold; } 
code span.cf { color: #fdbc4b; font-weight: bold; } 
code span.dt { color: #2980b9; } 
code span.dv { color: #f67400; } 
code span.do { color: #a43340; } 
code span.er { color: #da4453; } 
code span.ex { color: #0099ff; font-weight: bold; } 
code span.fl { color: #f67400; } 
code span.fu { color: #8e44ad; } 
code span.im { color: #27ae60; } 
code span.in { color: #c45b00; } 
code span.kw { color: #cfcfc2; font-weight: bold; } 
code span.op { color: #cfcfc2; } 
code span.ot { color: #27ae60; } 
code span.pp { color: #27ae60; } 
code span.sc { color: #3daee9; } 
code span.ss { color: #da4453; } 
code span.st { color: #f44f4f; } 
code span.va { color: #27aeae; } 
code span.vs { color: #da4453; } 
code span.wa { color: #da4453; } 
}</style>
</head>
<body>
<h1 id="sdl_openaudiodevice">SDL_OpenAudioDevice</h1>
<p>Open a specific audio device.</p>
<h2 id="header-file">Header File</h2>
<p>Defined in <a href="https://github.com/libsdl-org/SDL/blob/SDL2/include/SDL_audio.h">SDL_audio.h</a></p>
<h2 id="syntax">Syntax</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>SDL_AudioDeviceID SDL_OpenAudioDevice<span class="op">(</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                          <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>device<span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                          <span class="dt">int</span> iscapture<span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                          <span class="dt">const</span> SDL_AudioSpec <span class="op">*</span>desired<span class="op">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                          SDL_AudioSpec <span class="op">*</span>obtained<span class="op">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                          <span class="dt">int</span> allowed_changes<span class="op">);</span></span></code></pre></div>
<h2 id="function-parameters">Function Parameters</h2>
<table>
<tbody>
<tr class="odd">
<td>const char *</td>
<td><strong>device</strong></td>
<td>a UTF-8 string reported by <a href="SDL_GetAudioDeviceName.html">SDL_GetAudioDeviceName</a>() or a
driver-specific name as appropriate. NULL requests the most reasonable
default device.</td>
</tr>
<tr class="even">
<td>int</td>
<td><strong>iscapture</strong></td>
<td>non-zero to specify a device should be opened for recording, not
playback.</td>
</tr>
<tr class="odd">
<td>const <a href="SDL_AudioSpec.html">SDL_AudioSpec</a> *</td>
<td><strong>desired</strong></td>
<td>an <a href="SDL_AudioSpec.html">SDL_AudioSpec</a> structure
representing the desired output format; see <a href="SDL_OpenAudio.html">SDL_OpenAudio</a>() for more information.</td>
</tr>
<tr class="even">
<td><a href="SDL_AudioSpec.html">SDL_AudioSpec</a> *</td>
<td><strong>obtained</strong></td>
<td>an <a href="SDL_AudioSpec.html">SDL_AudioSpec</a> structure filled
in with the actual output format; see <a href="SDL_OpenAudio.html">SDL_OpenAudio</a>() for more information.</td>
</tr>
<tr class="odd">
<td>int</td>
<td><strong>allowed_changes</strong></td>
<td>0, or one or more flags OR&#39;d together.</td>
</tr>
</tbody>
</table>
<h2 id="return-value">Return Value</h2>
<p>(<a href="SDL_AudioDeviceID.html">SDL_AudioDeviceID</a>) Returns a
valid device ID &gt; 0 on success or 0 on failure; call <a href="SDL_GetError.html">SDL_GetError</a>() for more information.</p>
<p>For compatibility with SDL 1.2, this will never return 1, since SDL
reserves that ID for the legacy <a href="SDL_OpenAudio.html">SDL_OpenAudio</a>() function.</p>
<h2 id="remarks">Remarks</h2>
<p><a href="SDL_OpenAudio.html">SDL_OpenAudio</a>(), unlike this
function, always acts on device ID 1. As such, this function will never
return a 1 so as not to conflict with the legacy function.</p>
<p>Please note that SDL 2.0 before 2.0.5 did not support recording; as
such, this function would fail if <code>iscapture</code> was not zero.
Starting with SDL 2.0.5, recording is implemented and this value can be
non-zero.</p>
<p>Passing in a <code>device</code> name of NULL requests the most
reasonable default (and is equivalent to what <a href="SDL_OpenAudio.html">SDL_OpenAudio</a>() does to choose a device).
The <code>device</code> name is a UTF-8 string reported by <a href="SDL_GetAudioDeviceName.html">SDL_GetAudioDeviceName</a>(), but
some drivers allow arbitrary and driver-specific strings, such as a
hostname/IP address for a remote audio server, or a filename in the
diskaudio driver.</p>
<p>An opened audio device starts out paused, and should be enabled for
playing by calling <a href="SDL_PauseAudioDevice.html">SDL_PauseAudioDevice</a>(devid, 0) when
you are ready for your audio callback function to be called. Since the
audio driver may modify the requested size of the audio buffer, you
should allocate any local mixing buffers after you open the audio
device.</p>
<p>The audio callback runs in a separate thread in most cases; you can
prevent race conditions between your callback and other threads without
fully pausing playback with <a href="SDL_LockAudioDevice.html">SDL_LockAudioDevice</a>(). For more
information about the callback, see <a href="SDL_AudioSpec.html">SDL_AudioSpec</a>.</p>
<p>Managing the audio spec via &#39;desired&#39; and &#39;obtained&#39;:</p>
<p>When filling in the desired audio spec structure:</p>
<ul>
<li><code>desired-&gt;freq</code> should be the frequency in
sample-frames-per-second (Hz).</li>
<li><code>desired-&gt;format</code> should be the audio format (<a href="AUDIO_S16SYS.html"><code>AUDIO_S16SYS</code></a>, etc).</li>
<li><code>desired-&gt;samples</code> is the desired size of the audio
buffer, in <em>sample frames</em> (with stereo output, two samples--left
and right--would make a single sample frame). This number should be a
power of two, and may be adjusted by the audio driver to a value more
suitable for the hardware. Good values seem to range between 512 and
4096 inclusive, depending on the application and CPU speed. Smaller
values reduce latency, but can lead to underflow if the application is
doing heavy processing and cannot fill the audio buffer in time. Note
that the number of sample frames is directly related to time by the
following formula: <code>ms = (sampleframes*1000)/freq</code></li>
<li><code>desired-&gt;size</code> is the size in <em>bytes</em> of the
audio buffer, and is calculated by <a href="SDL_OpenAudioDevice.html">SDL_OpenAudioDevice</a>(). You don&#39;t
initialize this.</li>
<li><code>desired-&gt;silence</code> is the value used to set the buffer
to silence, and is calculated by <a href="SDL_OpenAudioDevice.html">SDL_OpenAudioDevice</a>(). You don&#39;t
initialize this.</li>
<li><code>desired-&gt;callback</code> should be set to a function that
will be called when the audio device is ready for more data. It is
passed a pointer to the audio buffer, and the length in bytes of the
audio buffer. This function usually runs in a separate thread, and so
you should protect data structures that it accesses by calling <a href="SDL_LockAudioDevice.html">SDL_LockAudioDevice</a>() and <a href="SDL_UnlockAudioDevice.html">SDL_UnlockAudioDevice</a>() in your
code. Alternately, you may pass a NULL pointer here, and call <a href="SDL_QueueAudio.html">SDL_QueueAudio</a>() with some frequency, to
queue more audio samples to be played (or for capture devices, call <a href="SDL_DequeueAudio.html">SDL_DequeueAudio</a>() with some frequency,
to obtain audio samples).</li>
<li><code>desired-&gt;userdata</code> is passed as the first parameter
to your callback function. If you passed a NULL callback, this value is
ignored.</li>
</ul>
<p><code>allowed_changes</code> can have the following flags OR&#39;d
together:</p>
<ul>
<li><a href="SDL_AUDIO_ALLOW_FREQUENCY_CHANGE.html"><code>SDL_AUDIO_ALLOW_FREQUENCY_CHANGE</code></a></li>
<li><a href="SDL_AUDIO_ALLOW_FORMAT_CHANGE.html"><code>SDL_AUDIO_ALLOW_FORMAT_CHANGE</code></a></li>
<li><a href="SDL_AUDIO_ALLOW_CHANNELS_CHANGE.html"><code>SDL_AUDIO_ALLOW_CHANNELS_CHANGE</code></a></li>
<li><a href="SDL_AUDIO_ALLOW_SAMPLES_CHANGE.html"><code>SDL_AUDIO_ALLOW_SAMPLES_CHANGE</code></a></li>
<li><a href="SDL_AUDIO_ALLOW_ANY_CHANGE.html"><code>SDL_AUDIO_ALLOW_ANY_CHANGE</code></a></li>
</ul>
<p>These flags specify how SDL should behave when a device cannot offer
a specific feature. If the application requests a feature that the
hardware doesn&#39;t offer, SDL will always try to get the closest
equivalent.</p>
<p>For example, if you ask for float32 audio format, but the sound card
only supports int16, SDL will set the hardware to int16. If you had set
<a href="SDL_AUDIO_ALLOW_FORMAT_CHANGE.html">SDL_AUDIO_ALLOW_FORMAT_CHANGE</a>,
SDL will change the format in the <code>obtained</code> structure. If
that flag was <em>not</em> set, SDL will prepare to convert your
callback&#39;s float32 audio to int16 before feeding it to the hardware and
will keep the originally requested format in the <code>obtained</code>
structure.</p>
<p>The resulting audio specs, varying depending on hardware and on what
changes were allowed, will then be written back to
<code>obtained</code>.</p>
<p>If your application can only handle one specific data format, pass a
zero for <code>allowed_changes</code> and let SDL transparently handle
any differences.</p>
<h2 id="version">Version</h2>
<p>This function is available since SDL 2.0.0.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="SDL_CloseAudioDevice.html">SDL_CloseAudioDevice</a></li>
<li><a href="SDL_GetAudioDeviceName.html">SDL_GetAudioDeviceName</a></li>
<li><a href="SDL_LockAudioDevice.html">SDL_LockAudioDevice</a></li>
<li><a href="SDL_OpenAudio.html">SDL_OpenAudio</a></li>
<li><a href="SDL_PauseAudioDevice.html">SDL_PauseAudioDevice</a></li>
<li><a href="SDL_UnlockAudioDevice.html">SDL_UnlockAudioDevice</a></li>
</ul>
<hr />
<p><a href="CategoryAPI.html">CategoryAPI</a>, <a href="CategoryAPIFunction.html">CategoryAPIFunction</a>, <a href="CategoryAudio.html">CategoryAudio</a></p>
</body>
</html>
